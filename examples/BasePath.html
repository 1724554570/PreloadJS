<!DOCTYPE html>
<html>
<head>
	<title>PreloadJS: Queue Example</title>

	<link rel="stylesheet" type="text/css" href="./assets/demoStyles.css" />
	<style type="text/css">
		#template {
			display:none;
		}
		.box {
			height: 128px;
			padding: 10px;
			margin: 2px;
		}
		.box.complete {
			background-color: #afa;
		}
		.box.error {
			background-color: #faa;
		}

	</style>
</head>
<body onload="init()">

	<header id="header" class="PreloadJS">
	    <h1><span class="text-product">Preload<strong>JS</strong></span> Preload Queue</h1>
	    <p>PreloadJS supports a "basePath" option, which can be used a variety of ways. This sample shows the different
		usages, and the precedence of each parameter.</p>
	</header>

	<div id="container" class="content">
		<div id="controls">
			<input type="checkbox" id="queuePath" /><label for="queuePath">Set the basePath of the LoadQueue to "assets/basepath/createjs/"</label><br />
			<input type="checkbox" id="loadPath" /><label for="loadPath">Set the basePath of the loadManifest call to "assets/basepath/preloadjs/"</label><br />
			<input type="checkbox" id="manifestPath" /><label for="manifestPath">Set the basePath of the JSON manifest to "assets/basepath/easeljs"</label><br />
			<input type="button" id="loadBtn" value="Load" />
			<hr />
		</div>
		<!-- New items will get placed here -->
	</div>

	<!-- Note: All PreloadJS classes are listed here: -->
    <script type="text/javascript" src="../src/createjs/events/Event.js"></script>
    <script type="text/javascript" src="../src/createjs/events/EventDispatcher.js"></script>
	<script type="text/javascript" src="../src/createjs/utils/IndexOf.js"></script>
	<script type="text/javascript" src="../src/createjs/utils/Proxy.js"></script>
    <script type="text/javascript" src="../src/preloadjs/AbstractLoader.js"></script>
    <script type="text/javascript" src="../src/preloadjs/LoadQueue.js"></script>
    <script type="text/javascript" src="../src/preloadjs/TagLoader.js"></script>
    <script type="text/javascript" src="../src/preloadjs/XHRLoader.js"></script>

    <!-- We also provide hosted minified versions of all CreateJS libraries.
      http://code.createjs.com -->

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

    <script type="text/javascript">

        function init() {
            if (window.top != window) {
                document.getElementById("header").style.display = "none";
            }
            $("#loadBtn").click(loadImages);
          	reset();
        }

        function reset() {
            // Reset the UI
            $("#loadBtn").attr("disabled", false);
		}

		function loadImages() {
			$("#loadBtn").attr("disabled", true);

            // Create a preloader. There is no manifest added to it up-front, we will add items on-demand.
			var queuePath = $("#queuePath").attr("checked") ? "assets/basepath/createjs/" : "";
            var queue = new createjs.LoadQueue(true, queuePath);
            queue.on("complete", handleComplete);
            queue.on("fileload", handleFileComplete);
            queue.on("error", handleFileError);

			// Default manifest. Use this to avoid having to point this elsewhere.
			var manifest = [
				"icon_16x16.png",
				"icon_48x48.png",
				"icon_128x128.png"
			];
			//var manifest = $("#manifestPath").attr("checked") ? "manifest_basepath.json" : "manifest.json";
			//var loadPath = $("#loadPath").attr("checked") ? "assets/basepath/easeljs/" : "assets/basepath/preloadjs/";
			queue.loadManifest(manifest, true);

            // Create a new loader display item
            var div = $("<div></div>");
            div.addClass("box");
            $("#controls").after(div);
        }

        // File complete handler
        function handleFileComplete(event) {
            var img = event.result;
			var div = $("#container .box").eq(0);
            div.append(img);
        }

		function handleComplete(event) {
			var div = $("#container .box").eq(0);
			div.addClass("complete");
			reset();
		}

        // An error happened on a file
        function handleFileError(event) {
			var div = $("#container .box").eq(0);
            div.addClass("error");
        }

    </script>

</body>
</html>